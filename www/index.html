<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>SoundCloud Downloader - Download SoundCloud Music MP3 | Jhon Production</title>
  <meta name="description" content="Download SoundCloud tracks as MP3 in high quality using the Jhon Production SoundCloud downloader. Fast, responsive, and easy to use."/>
  <meta name="keywords" content="soundcloud downloader, download soundcloud, soundcloud mp3, soundcloud to mp3, soundcloud music downloader, Jhon Production, Cpm_Jhon"/>
  <meta name="theme-color" content="#000000"/>
  <link rel="icon" href="jp.jpg"/>
  <link rel="apple-touch-icon" href="jp.jpg"/>
  <meta property="og:title" content="SoundCloud Downloader - Download SoundCloud Music MP3 | Jhon Production"/>
  <meta property="og:description" content="Download SoundCloud tracks as MP3 quickly and securely via Jhon Production."/>
  <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/145/145809.png"/>
  <meta property="og:type" content="website"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css"/>
  <meta name="kadam-verification" content="kadam632e767ca50100c44dfbd6409bc840e0" />
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Segoe UI',sans-serif;background:#000;color:#f1fdf1;line-height:1.6;min-height:100vh}
    nav{position:fixed;width:100%;top:0;left:0;background:rgba(0,0,0,.95);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.1);z-index:1000}
    .nav-container{max-width:1280px;margin:0 auto;padding:0 1.5rem;display:flex;align-items:center;justify-content:space-between;height:4rem}
    .logo{display:flex;align-items:center;gap:.75rem;cursor:pointer}
    .logo img{height:2rem;width:2rem;border-radius:50%}
    .logo span{font-size:1.25rem;font-weight:bold;color:#98ff98}
    .nav-links{display:flex;gap:1.5rem}
    .nav-links a{text-decoration:none;color:#fff;transition:.3s}
    .nav-links a:hover{color:#98ff98}
    .hamburger{display:none;flex-direction:column;cursor:pointer;gap:5px}
    .hamburger span{height:3px;width:25px;background:#98ff98;transition:.3s}
    .hamburger.active span:nth-child(1){transform:rotate(45deg) translate(5px,5px)}
    .hamburger.active span:nth-child(2){opacity:0}
    .hamburger.active span:nth-child(3){transform:rotate(-45deg) translate(5px,-5px)}
    .mobile-menu{display:none;background:#000;padding:1rem}
    .mobile-menu.active{display:grid;gap:1.5rem;grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}
    .mobile-menu h3{color:#fff;margin-bottom:.5rem}
    .mobile-menu a{color:#fff;padding:.25rem 0;text-decoration:none;display:block;transition:.3s}
    .mobile-menu a:hover{color:#98ff98}
    .main-content{max-width:900px;margin:0 auto;padding:6rem 1rem 3rem}
    .card{background:rgba(255,255,255,.03);border-radius:1rem;padding:1.5rem;margin-bottom:1.5rem;border:1px solid rgba(255,255,255,.04)}
    .title-row{display:flex;align-items:center;gap:1rem;flex-wrap:wrap;justify-content:center;margin-bottom:1rem}
    .sc-icon{display:flex;align-items:center;justify-content:center;height:44px;width:44px;border-radius:8px;background:linear-gradient(45deg,#ff7700,#ff5500);overflow:hidden}
    .sc-icon img{width:100%;height:100%;object-fit:cover}
    .page-title{font-size:1.75rem;font-weight:700;color:#98ff98}
    .subtitle{color:#aaa;text-align:center;margin-bottom:1rem}
    .input-row{display:flex;gap:0.5rem;align-items:center;flex-wrap:wrap;justify-content:center}
    .text-input{flex:1;min-width:220px;padding:.75rem 1rem;border-radius:.5rem;border:1px solid rgba(255,255,255,.06);background:transparent;color:#fff}
    .btn{border:none;background:#98ff98;color:#000;padding:.75rem 1.25rem;border-radius:.5rem;cursor:pointer;transition:.3s;font-weight:bold;display:inline-flex;align-items:center;justify-content:center;gap:.5rem}
    .btn:hover{background:#7ae87a;transform:translateY(-1px)}
    .btn:disabled{background:#666;color:#ccc;cursor:not-allowed;transform:none}
    .btn-secondary{background:#444;color:#fff}
    .btn-secondary:hover{background:#555}
    .btn-small{padding:.4rem .75rem;font-size:.8rem}
    .result-area{display:none;margin-top:1rem}
    .section-label{font-weight:bold;color:#98ff98;margin-bottom:.25rem}
    .section-info{color:#aaa;font-size:.95rem;margin-bottom:1rem}
    .split-layout{display:grid;grid-template-columns:1.2fr .8fr;gap:1rem;align-items:flex-start}
    .split-card{background:transparent;border:none;padding:0;margin:0}
    .divider-vertical{width:1px;background:linear-gradient(to bottom,transparent,rgba(255,255,255,.25),transparent);height:100%;margin:0 auto}
    .track-results{margin-top:1rem;display:none}
    .results-header{display:flex;align-items:center;justify-content:space-between;gap:.75rem;margin-bottom:.75rem;flex-wrap:wrap}
    .results-title{font-weight:bold;color:#fff;display:flex;align-items:center;gap:.5rem}
    .results-count{color:#aaa;font-size:.85rem}
    .results-list{display:flex;flex-direction:column;gap:.75rem;max-height:420px;overflow:auto;padding-right:.25rem}
    .track-item{display:grid;grid-template-columns:auto 1fr;gap:.75rem;border-radius:.75rem;padding:.75rem;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.04);transition:.2s}
    .track-item:hover{border-color:rgba(255,255,255,.15);background:rgba(255,255,255,.04)}
    .track-thumb{width:70px;height:70px;border-radius:.5rem;overflow:hidden;flex-shrink:0;background:#111}
    .track-thumb img{width:100%;height:100%;object-fit:cover}
    .track-main{display:flex;flex-direction:column;gap:.35rem}
    .track-title{font-weight:600;color:#fff;font-size:.95rem;line-height:1.3}
    .track-meta-top{display:flex;align-items:center;gap:.4rem;font-size:.8rem;color:#ccc;flex-wrap:wrap}
    .track-author a{color:#98ff98;text-decoration:none}
    .track-author a:hover{text-decoration:underline}
    .badge-small{display:inline-flex;align-items:center;gap:.25rem;background:rgba(255,255,255,.06);padding:.15rem .5rem;border-radius:999px;font-size:.75rem;color:#ccc}
    .dot-separator{width:3px;height:3px;border-radius:50%;background:rgba(255,255,255,.35)}
    .track-stats{display:flex;align-items:center;gap:.5rem;font-size:.8rem;color:#aaa;flex-wrap:wrap}
    .track-actions{margin-top:.35rem;display:flex;gap:.4rem;flex-wrap:wrap}
    .track-pill-btn{padding:.3rem .7rem;font-size:.8rem;border-radius:999px;border:none;cursor:pointer;display:inline-flex;align-items:center;gap:.35rem;background:#222;color:#eee;transition:.2s}
    .track-pill-btn:hover{background:#333}
    .track-pill-btn-primary{background:#98ff9840;color:#fff}
    .track-pill-btn-primary:hover{background:#98ff98}
    .track-pill-btn-primary i{font-size:.9rem}
    .current-track-card{margin-top:1rem;padding:1rem;border-radius:.9rem;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.04)}
    .current-track-header{display:flex;align-items:center;justify-content:space-between;gap:.75rem;margin-bottom:.75rem;flex-wrap:wrap}
    .current-track-title{display:flex;align-items:center;gap:.5rem}
    .current-track-icon{width:34px;height:34px;border-radius:999px;background:rgba(255,255,255,.08);display:flex;align-items:center;justify-content:center;color:#ff7700}
    .current-track-meta{display:flex;flex-direction:column;gap:.25rem;font-size:.85rem;color:#ccc}
    .current-track-meta a{color:#98ff98;text-decoration:none}
    .current-track-meta a:hover{text-decoration:underline}
    .current-track-extra{display:flex;align-items:center;gap:.5rem;font-size:.8rem;color:#aaa;flex-wrap:wrap;margin-top:.4rem}
    .current-thumb{width:72px;height:72px;border-radius:.5rem;overflow:hidden;background:#111}
    .current-thumb img{width:100%;height:100%;object-fit:cover}
    .current-main{display:grid;grid-template-columns:auto 1fr;gap:.75rem;align-items:flex-start}
    .current-actions{margin-top:.5rem;display:flex;flex-wrap:wrap;gap:.5rem}
    .pill-soft{padding:.3rem .75rem;border-radius:999px;font-size:.8rem;background:rgba(255,255,255,.06);color:#ccc;display:inline-flex;align-items:center;gap:.3rem}
    .pill-soft i{font-size:.9rem}
    .download-section{margin-top:1.25rem}
    .download-title{color:#98ff98;font-weight:bold;margin-bottom:.75rem;display:flex;align-items:center;gap:.5rem}
    .download-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:.75rem;margin-bottom:.5rem}
    .download-card{padding:1rem;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.04);border-radius:.75rem;display:flex;flex-direction:column;gap:.6rem}
    .download-card-title{font-weight:600;color:#fff;display:flex;align-items:center;gap:.5rem}
    .download-card-desc{color:#aaa;font-size:.85rem}
    .actions{margin-top:1rem;display:flex;gap:0.5rem;flex-wrap:wrap;justify-content:center}
    .info{color:#aaa;font-size:.95rem;margin-top:.75rem}
    .faq{margin-top:2rem;padding:1rem;border-radius:.75rem;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.03)}
    .faq h3{color:#98ff98;margin-bottom:.5rem}
    .loading-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.9);backdrop-filter:blur(10px);z-index:2000;display:none;flex-direction:column;align-items:center;justify-content:center}
    .loading-spinner{width:60px;height:60px;border:4px solid rgba(152,255,152,.3);border-top:4px solid #98ff98;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:1rem}
    .loading-text{color:#98ff98;font-size:1.1rem;text-align:center}
    @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
    footer{background:#000;border-top:1px solid rgba(255,255,255,.1);padding:3rem 1rem 1.5rem;margin-top:3rem}
    .footer-grid{max-width:1280px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem;text-align:center}
    .footer-info{text-align:center}
    .footer-info p{margin-top:1rem;color:#aaa}
    .footer-links h3{color:#fff;margin-bottom:1rem}
    .footer-links a{display:block;color:#aaa;margin-bottom:.5rem;text-decoration:none}
    .footer-links a:hover{color:#98ff98}
    .social-links{margin-top:1.5rem}
    .social-icons{display:flex;justify-content:center;gap:1rem;flex-wrap:wrap}
    .social-link{color:#aaa;padding:.5rem;border-radius:.5rem;background:rgba(255,255,255,.1);display:flex;align-items:center;justify-content:center;gap:.5rem;transition:.3s;font-size:1.5rem}
    .social-link:hover{color:#fff;background:rgba(152,255,152,.2)}
    .footer-bottom{margin-top:2rem;text-align:center;color:#777;font-size:.875rem}
    .swal2-popup{background:rgba(0,0,0,.95)!important;color:#f1fdf1!important;border:1px solid rgba(255,255,255,.1)!important}
    .swal2-title{color:#98ff98!important}
    .swal2-confirm{background:#3cb371!important}
    .swal2-cancel{background:#666!important}
    ::-webkit-scrollbar{width:8px;height:8px}
    ::-webkit-scrollbar-track{background:transparent}
    ::-webkit-scrollbar-thumb{background:rgba(255,255,255,.1);border-radius:999px}
    ::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,.2)}
    @media(max-width:900px){
      .split-layout{grid-template-columns:1fr}
      .divider-vertical{display:none}
    }
    @media(max-width:768px){
      .nav-links{display:none}
      .hamburger{display:flex}
      .input-row{flex-direction:column;align-items:stretch}
      .download-grid{grid-template-columns:1fr}
      .results-list{max-height:340px}
    }
  </style>
</head>
<body>
  <nav>
    <div class="nav-container">
      <div class="logo" onclick="window.location.href='https://host.optikl.ink'">
        <img src="jp.jpg" alt="Jhon Production Logo"/>
        <span>Jhon Production</span>
      </div>
      <div class="nav-links">
        <a href="/doc">Docs</a>
        <a href="tools.html">Tools</a>
        <a href="upload page.html">Uploader</a>
        <a href="https://riskynd.eu.org/website">Other</a>
        <a href="tems.html">Terms</a>
        <a href="https://host.optikl.ink/privacy">Privacy</a>
      </div>
      <div class="hamburger" id="hamburger"><span></span><span></span><span></span></div>
    </div>
    <div class="mobile-menu" id="mobileMenu">
      <div>
        <h3>Resources</h3>
        <a href="/doc">Docs</a>
        <a href="tools.html">Tools</a>
        <a href="upload page.html">Uploader</a>
        <a href="https://riskynd.eu.org/website">Other</a>
      </div>
      <div>
        <h3>Legal</h3>
        <a href="tems.html">Terms</a>
        <a href="https://host.optikl.ink/privacy">Privacy</a>
      </div>
    </div>
  </nav>

  <main>
    <div class="main-content">
      <div style="text-align:center;margin-bottom:1rem;">
        <div class="title-row">
          <div class="sc-icon">
            <img src="jp.jpg" alt="SoundCloud Icon" loading="lazy"/>
          </div>
          <div>
            <div class="page-title">Jhon Downloader</div>
            <div class="subtitle">Search and download Jhon Production tracks as MP3 in high quality</div>
          </div>
        </div>
      </div>
     
      <div class="card">
        <div class="split-layout">
          <div class="split-card">
            <div class="section-label">Search by Title</div>
            <div class="section-info">Type a song title, artist, or keyword. Results will show rich metadata, thumbnail, and a download button for each track.</div>
            <div class="input-row" style="margin-top:.25rem;">
              <input id="scQuery" class="text-input" type="text" placeholder="Search Jhon Production (e.g. Denny Caknan - Sigar)" aria-label="Jhon Production search query"/>
              <button id="searchBtn" class="btn"><i class="bi bi-search"></i> Search</button>
            </div>

            <div id="trackResults" class="track-results">
              <div class="results-header">
                <div class="results-title">
                  <i class="bi bi-music-note-list"></i>
                  <span>Search Results</span>
                </div>
                <div class="results-count" id="resultsCount"></div>
              </div>
              <div id="resultsList" class="results-list"></div>
            </div>
          </div>

          <div class="divider-vertical"></div>
          
          <div class="TgzkGb410560"></div>

          <div class="split-card">
            <div class="section-label">Download by URL</div>
            <div class="section-info">Paste a Jhon Production track URL to fetch and download the audio instantly.</div>
            <div class="input-row" style="margin-top:.25rem;">
              <input id="scUrl" class="text-input" type="text" placeholder="Paste Jhon Production URL here (https://soundcloud.com/...)" aria-label="Jhon Production URL"/>
              <button id="fetchBtn" class="btn"><i class="bi bi-download"></i> Download</button>
            </div>

            <div id="currentTrackCard" class="current-track-card" style="display:none;">
              <div class="current-track-header">
                <div class="current-track-title">
                  <div class="current-track-icon">
                    <i class="bi bi-soundwave"></i>
                  </div>
                  <div>
                    <div id="currentTitle" style="font-weight:600;color:#fff;font-size:.95rem;"></div>
                    <div class="current-track-meta">
                      <span id="currentAuthor"></span>
                      <a id="currentUrl" href="#" target="_blank" rel="noopener noreferrer"></a>
                    </div>
                  </div>
                </div>
                <div class="pill-soft">
                  <i class="bi bi-clock"></i><span id="currentDuration"></span>
                </div>
              </div>
              <div class="current-main">
                <div class="current-thumb">
                  <img id="currentThumb" src="" alt="Cover"/>
                </div>
                <div>
                  <div class="current-actions">
                    <button id="btnAudioMain" class="btn"><i class="bi bi-download"></i> Download MP3</button>
                    <button id="btnOpenOriginal" class="btn btn-secondary"><i class="bi bi-box-arrow-up-right"></i> Open in SoundCloud</button>
                  </div>
                  <div class="current-track-extra">
                    <span class="pill-soft"><i class="bi bi-cloud-arrow-down"></i>High quality MP3</span>
                    <span class="pill-soft"><i class="bi bi-shield-check"></i>Powered by Jhon Production</span>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>

        <div id="resultArea" class="result-area">
          <div class="download-section">
            <div class="download-title"><i class="bi bi-download"></i> Download Options</div>
            <div class="download-grid">
              <div class="download-card">
                <div class="download-card-title"><i class="bi bi-music-note-beamed"></i> MP3 Audio (High Quality)</div>
                <div class="download-card-desc">Get high quality MP3 audio extracted from the Jhon Production track.</div>
                <button class="btn" id="btnAudioSecondary"><i class="bi bi-download"></i> Download MP3</button>
              </div>
              <div class="download-card">
                <div class="download-card-title"><i class="bi bi-play-circle"></i> Play in Browser</div>
                <div class="download-card-desc">Preview the audio directly in your browser before downloading.</div>
                <audio id="previewAudio" controls style="width:100%;background:#000;border-radius:.5rem;outline:none"></audio>
              </div>
            </div>
          </div>

          <div class="actions">
            <button id="resetBtn" class="btn btn-secondary"><i class="bi bi-arrow-clockwise"></i> Download Another</button>
          </div>
        </div>
      </div>

      <div class="EKYTKD410553"></div>

      <div class="faq">
        <h3>Usage</h3>
        <p>Use the search field to find tracks by title, then click the Download button on your preferred result. Or paste a Jhon Production URL directly, fetch its metadata, and download the MP3.</p>

        <h3 style="margin-top:1rem">FAQ</h3>
        <strong>Q: Can I download MP3 from Jhon Production?</strong>
        <p>A: Yes, this tool converts and provides the track as an MP3 file where possible.</p>

        <strong>Q: Does it support any Jhon Production link?</strong>
        <p>A: As long as the track is publicly available on Jhon Production, the downloader will attempt to process it.</p>

        <strong>Q: Is this free?</strong>
        <p>A: Yes! This web interface uses Jhon Production and is free to use.</p>

        <strong>Q: Any legal concerns?</strong>
        <p>A: Please ensure you own or have permission to download and use the content. This tool is intended for personal use only; always respect copyright and Jhon Production terms of service.</p>
      </div>
    </div>
  </main>

  <div id="loadingOverlay" class="loading-overlay">
    <div class="loading-spinner"></div>
    <div class="loading-text">
      <div style="font-weight:bold;margin-bottom:.5rem;">Processing your request...</div>
      <div style="font-size:.9rem;opacity:.8;">Fetching Jhon Production content</div>
    </div>
  </div>

  <div class="GFFRsf410557"></div>

  <footer>
    <div class="footer-grid">
      <div class="footer-info">
        <div class="logo">
          <img src="jp.jpg" alt="Jhon Production Logo"/>
          <span>Jhon Production</span>
        </div>
        <p>Empowering developers with reliable and powerful API solutions for modern applications.</p>
        <div class="social-links">
          <h3>Connect With Us</h3>
          <div class="social-icons">
            <a href="https://instagram.com/botzaku" class="social-link"><i class="bi bi-instagram"></i></a>
            <a href="https://tiktok.com/@botzaku" class="social-link"><i class="bi bi-tiktok"></i></a>
            <a href="https://twitter.com/botz_aku" class="social-link"><i class="bi bi-twitter"></i></a>
            <a href="https://t.me/BotzAku" class="social-link"><i class="bi bi-telegram"></i></a>
            <a href="https://whatsapp.com/channel/0029VbBjxQl8qIzmg51J5W3x" class="social-link"><i class="bi bi-whatsapp"></i></a>
            <a href="https://discord.gg/Ehr7DrsU" class="social-link"><i class="bi bi-discord"></i></a>
          </div>
        </div>
      </div>
      <div class="footer-links">
        <h3>Resources</h3>
        <a href="/doc">API Documentation</a>
        <a href="tools.html">Web Tools</a>
        <a href="upload page.html">Uploader Service</a>
        <a href="https://riskynd.eu.org/website">Other</a>
      </div>
      <div class="footer-links">
        <h3>Legal</h3>
        <a href="tems.html">Terms of Service</a>
        <a href="https://host.optikl.ink/privacy">Privacy Policy</a>
      </div>
    </div>
    <div class="footer-bottom">Â© <span id="current-year"></span> Jhon Production. All rights reserved.</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    document.getElementById('current-year').textContent = new Date().getFullYear();

    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobileMenu');
    hamburger.addEventListener('click', () => {
      hamburger.classList.toggle('active');
      mobileMenu.classList.toggle('active');
    });

    const loadingOverlay = document.getElementById('loadingOverlay');
    function showLoading(show=true){
      loadingOverlay.style.display = show ? 'flex' : 'none';
    }

    function formatNumberShort(val){
      if(val === undefined || val === null) return '';
      const txt = String(val).trim();
      if(/^\d+(\.\d+)?[KMB]$/i.test(txt)) return txt;
      const num = Number(txt.replace(/[^0-9.]/g,''));
      if(isNaN(num)) return txt;
      if(num >= 1e9) return (num/1e9).toFixed(1)+'B';
      if(num >= 1e6) return (num/1e6).toFixed(1)+'M';
      if(num >= 1e3) return (num/1e3).toFixed(1)+'K';
      return num.toString();
    }

    function sanitizeFileName(name,fallback){
      const base=(name||fallback||'SoundCloud').toString().trim().replace(/\s+/g,' ').slice(0,80);
      const cleaned=base.replace(/[^\w\d\- ]+/g,'').replace(/\s+/g,'_');
      return cleaned || 'SoundCloud';
    }

    async function downloadFile(url,filename){
      try{
        showLoading(true);
        const res=await fetch(url);
        const blob=await res.blob();
        const blobUrl=URL.createObjectURL(blob);
        const a=document.createElement('a');
        a.href=blobUrl;
        a.download=filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(blobUrl);
        showLoading(false);
        Swal.fire({
          title:'Downloaded!',
          text:'File downloaded successfully',
          icon:'success',
          toast:true,
          position:'top',
          showConfirmButton:false,
          timer:2000
        });
      }catch(e){
        showLoading(false);
        Swal.fire({
          title:'Download Failed',
          text:'Could not download file. Try opening the link directly.',
          icon:'error',
          toast:true,
          position:'top',
          showConfirmButton:false,
          timer:3000
        });
        window.open(url,'_blank');
      }
    }

    const scQuery=document.getElementById('scQuery');
    const searchBtn=document.getElementById('searchBtn');
    const trackResults=document.getElementById('trackResults');
    const resultsList=document.getElementById('resultsList');
    const resultsCount=document.getElementById('resultsCount');

    const scUrl=document.getElementById('scUrl');
    const fetchBtn=document.getElementById('fetchBtn');

    const currentTrackCard=document.getElementById('currentTrackCard');
    const currentTitle=document.getElementById('currentTitle');
    const currentAuthor=document.getElementById('currentAuthor');
    const currentUrl=document.getElementById('currentUrl');
    const currentDuration=document.getElementById('currentDuration');
    const currentThumb=document.getElementById('currentThumb');
    const btnAudioMain=document.getElementById('btnAudioMain');
    const btnOpenOriginal=document.getElementById('btnOpenOriginal');

    const resultArea=document.getElementById('resultArea');
    const btnAudioSecondary=document.getElementById('btnAudioSecondary');
    const previewAudio=document.getElementById('previewAudio');
    const resetBtn=document.getElementById('resetBtn');

    let currentDownloadData=null;

    function resetUI(){
      document.title='SoundCloud Downloader - Download SoundCloud Music MP3 | BotzSC';
      resultsList.innerHTML='';
      resultsCount.textContent='';
      trackResults.style.display='none';
      currentTrackCard.style.display='none';
      resultArea.style.display='none';
      previewAudio.src='';
      previewAudio.pause();
      currentDownloadData=null;
      scUrl.value='';
    }

    resetBtn.addEventListener('click',()=>{
      scQuery.value='';
      resetUI();
      window.scrollTo({top:0,behavior:'smooth'});
    });

    async function handleDownloadByUrl(url){
      const cleanUrl=url.trim();
      if(!cleanUrl){
        Swal.fire({
          title:'Missing URL',
          text:'Please paste a SoundCloud URL',
          icon:'warning',
          toast:true,
          position:'top',
          showConfirmButton:false,
          timer:2000
        });
        return;
      }
      showLoading(true);
      try{
        const apiUrl='https://host.optikl.ink/soundcloud/download?url='+encodeURIComponent(cleanUrl);
        const res=await fetch(apiUrl,{method:'GET'});
        if(!res.ok) throw new Error('API returned HTTP '+res.status);
        const data=await res.json();
        if(!data || !data.audio_url){
          Swal.fire({
            title:'Failed',
            text:'Failed to retrieve audio URL',
            icon:'error',
            toast:true,
            position:'top',
            showConfirmButton:false,
            timer:3000
          });
          return;
        }
        currentDownloadData=data;
        const safeTitle=sanitizeFileName(data.title,'BotzSC');
        document.title=safeTitle+' - SoundCloud Downloader | BotzSC';

        currentTitle.textContent=data.title||'Unknown title';
        currentAuthor.textContent=data.author ? 'By '+data.author : '';
        currentUrl.textContent=cleanUrl;
        currentUrl.href=cleanUrl;
        currentDuration.textContent=data.duration||'Unknown';
        currentThumb.src=data.thumbnail||'https://cdn-icons-png.flaticon.com/512/145/145809.png';

        const audioUrl=data.audio_url;
        previewAudio.src=audioUrl;

        btnAudioMain.onclick=()=>downloadFile(audioUrl,safeTitle+'.mp3');
        btnAudioSecondary.onclick=()=>downloadFile(audioUrl,safeTitle+'.mp3');
        btnOpenOriginal.onclick=()=>window.open(cleanUrl,'_blank');

        currentTrackCard.style.display='block';
        resultArea.style.display='block';

        setTimeout(()=>{
          currentTrackCard.scrollIntoView({behavior:'smooth',block:'start'});
        },120);

        Swal.fire({
          title:'Success!',
          text:'SoundCloud track loaded',
          icon:'success',
          toast:true,
          position:'top',
          showConfirmButton:false,
          timer:1500
        });
      }catch(e){
        Swal.fire({
          title:'Error',
          text:e.message,
          icon:'error',
          toast:true,
          position:'top',
          showConfirmButton:false,
          timer:4000
        });
      }finally{
        showLoading(false);
      }
    }

    fetchBtn.addEventListener('click',()=>{
      if(scUrl.value.trim()){
        handleDownloadByUrl(scUrl.value);
      }else if(currentUrl.href && currentUrl.href !== '#'){
        handleDownloadByUrl(currentUrl.href);
      }else{
        Swal.fire({
          title:'Missing URL',
          text:'Please paste a SoundCloud URL or select a track from search results.',
          icon:'warning',
          toast:true,
          position:'top',
          showConfirmButton:false,
          timer:2200
        });
      }
    });

    async function handleSearch(query){
      const q=query.trim();
      if(!q){
        Swal.fire({
          title:'Missing Query',
          text:'Please enter a title or keyword',
          icon:'warning',
          toast:true,
          position:'top',
          showConfirmButton:false,
          timer:2000
        });
        return;
      }
      showLoading(true);
      try{
        const apiUrl='https://host.optikl.ink/soundcloud/search?query='+encodeURIComponent(q);
        const res=await fetch(apiUrl,{method:'GET'});
        if(!res.ok) throw new Error('API returned HTTP '+res.status);
        const data=await res.json();
        if(!Array.isArray(data) || data.length===0){
          resultsList.innerHTML='';
          resultsCount.textContent='No results';
          trackResults.style.display='block';
          Swal.fire({
            title:'No Results',
            text:'No tracks found for this query',
            icon:'info',
            toast:true,
            position:'top',
            showConfirmButton:false,
            timer:2500
          });
          return;
        }
        resultsList.innerHTML='';
        resultsCount.textContent=data.length+' track'+(data.length>1?'s':'');
        trackResults.style.display='block';

        data.forEach((item,idx)=>{
          const trackEl=document.createElement('div');
          trackEl.className='track-item';

          const url=item.url||'#';
          const thumb=item.thumbnail||'https://cdn-icons-png.flaticon.com/512/145/145809.png';
          const duration=item.duration||'Unknown';
          const authorName=item.author&&item.author.name?item.author.name:'Unknown artist';
          const authorUrl=item.author&&item.author.url?item.author.url:'#';
          const like=item.like_count;
          const play=item.play_count;
          const downloadCount=item.download_count;
          const releaseDate=item.release_date;

          trackEl.innerHTML=`
            <div class="track-thumb">
              <img src="${thumb}" alt="Thumbnail ${idx+1}"/>
            </div>
            <div class="track-main">
              <div class="track-title">${item.title||'Untitled track'}</div>
              <div class="track-meta-top">
                <span class="track-author">by <a href="${authorUrl}" target="_blank" rel="noopener noreferrer">${authorName}</a></span>
                ${releaseDate?'<span class="dot-separator"></span><span class="badge-small"><i class="bi bi-calendar-event"></i>'+releaseDate+'</span>':''}
                <span class="dot-separator"></span>
                <span class="badge-small"><i class="bi bi-clock"></i>${duration}</span>
              </div>
              <div class="track-stats">
                ${play?'<span><i class="bi bi-play-fill"></i> '+play+'</span>':''}
                ${like?'<span><i class="bi bi-heart-fill"></i> '+like+'</span>':''}
                ${downloadCount?'<span><i class="bi bi-cloud-arrow-down"></i> '+downloadCount+'</span>':''}
              </div>
              <div class="track-actions">
                <button class="track-pill-btn track-pill-btn-primary" data-url="${url}">
                  <i class="bi bi-download"></i> Download
                </button>
                <button class="track-pill-btn" data-open="${url}">
                  <i class="bi bi-box-arrow-up-right"></i> Open
                </button>
                <span class="pill-soft"><i class="bi bi-music-note-beamed"></i>${formatNumberShort(play)||'Track'}</span>
              </div>
            </div>
          `;
          resultsList.appendChild(trackEl);
        });

        resultsList.querySelectorAll('button.track-pill-btn-primary').forEach(btn=>{
          btn.addEventListener('click',()=>{
            const url=btn.getAttribute('data-url')||'';
            if(!url || url==='#'){
              Swal.fire({
                title:'Invalid URL',
                text:'This track does not have a valid URL.',
                icon:'error',
                toast:true,
                position:'top',
                showConfirmButton:false,
                timer:2500
              });
              return;
            }
            scUrl.value=url;
            handleDownloadByUrl(url);
          });
        });

        resultsList.querySelectorAll('button.track-pill-btn[data-open]').forEach(btn=>{
          btn.addEventListener('click',()=>{
            const u=btn.getAttribute('data-open')||'#';
            if(u && u!=='#') window.open(u,'_blank');
          });
        });

        Swal.fire({
          title:'Search Complete',
          text:'Select a track to download',
          icon:'success',
          toast:true,
          position:'top',
          showConfirmButton:false,
          timer:1800
        });
      }catch(e){
        Swal.fire({
          title:'Error',
          text:e.message,
          icon:'error',
          toast:true,
          position:'top',
          showConfirmButton:false,
          timer:4000
        });
      }finally{
        showLoading(false);
      }
    }

    searchBtn.addEventListener('click',()=>handleSearch(scQuery.value));
    scQuery.addEventListener('keydown',e=>{if(e.key==='Enter')handleSearch(scQuery.value)});
    scUrl.addEventListener('keydown',e=>{if(e.key==='Enter')fetchBtn.click()});

    resetUI();
  </script>
  <script>
    window.k_init = window.k_init || [];
    k_init.push({
        id: 'EKYTKD410553',
        type: 'bn',
        domain: 'hdbkome.com',
        refresh: false,
        next: 0
    });
    
    var s = document.createElement('script');
    s.setAttribute('async', true);
    s.setAttribute('charset', 'utf-8');
    s.setAttribute('data-cfasync', false);
    s.src = 'https://hdbkome.com/41qrg8ae.js'; 
    document.head && document.head.appendChild(s);
  </script>
  <script>
    window.k_init = window.k_init || [];
    k_init.push({
        id: 'GFFRsf410557',
        type: 'bn',
        domain: 'hdbkome.com',
        refresh: false,
        next: 0
    });
    
    var s = document.createElement('script');
    s.setAttribute('async', true);
    s.setAttribute('charset', 'utf-8');
    s.setAttribute('data-cfasync', false);
    s.src = 'https://hdbkome.com/gsg6zrd3.js'; 
    document.head && document.head.appendChild(s);
  </script>
  <script>
    window.k_init = window.k_init || [];
    k_init.push({
        id: 'TgzkGb410560',
        type: 'bn',
        domain: 'hdbkome.com',
        refresh: false,
        next: 0
    });
    
    var s = document.createElement('script');
    s.setAttribute('async', true);
    s.setAttribute('charset', 'utf-8');
    s.setAttribute('data-cfasync', false);
    s.src = 'https://hdbkome.com/8nedfr56.js'; 
    document.head && document.head.appendChild(s);
  </script>
</body>
</html>
